name: 'Terraform Plan'
description: 'Preview your terraform plan'
inputs: {}
outputs:
  stdout:
    description: "terraform plan stdout"
    value: ${{ steps.plan.outputs.stdout }}
  exitcode:
    description: "terraform plan exitcode"
    value: ${{ steps.plan.outputs.exitcode }}
runs:
  using: "composite"
  steps: 
    - name: Terraform Plan
      shell: bash
      id: plan
      working-directory: terraform/${{ matrix.dir }}
      run: ${{ github.action_path }}/diff.sh
